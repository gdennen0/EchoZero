<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EchoZero Documentation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }
        
        .container {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        
        .sidebar {
            width: 300px;
            background: #2c3e50;
            color: white;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }
        
        .sidebar h1 {
            font-size: 24px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #34495e;
        }
        
        .search-box {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .nav-section {
            margin-bottom: 20px;
        }
        
        .nav-section h2 {
            font-size: 14px;
            text-transform: uppercase;
            color: #95a5a6;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .nav-item {
            display: block;
            padding: 8px 12px;
            color: #ecf0f1;
            text-decoration: none;
            border-radius: 4px;
            margin-bottom: 4px;
            transition: background 0.2s;
            cursor: pointer;
        }
        
        .nav-item:hover {
            background: #34495e;
        }
        
        .nav-item.active {
            background: #3498db;
        }
        
        .content {
            flex: 1;
            overflow-y: auto;
            padding: 40px;
            background: white;
        }
        
        .content h1 {
            font-size: 36px;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .content h2 {
            font-size: 28px;
            margin-top: 40px;
            margin-bottom: 20px;
            color: #34495e;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .content h3 {
            font-size: 22px;
            margin-top: 30px;
            margin-bottom: 15px;
            color: #34495e;
        }
        
        .content p {
            margin-bottom: 15px;
            line-height: 1.8;
        }
        
        .content ul, .content ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }
        
        .content li {
            margin-bottom: 8px;
        }
        
        .content code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .content pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin-bottom: 20px;
        }
        
        .content pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        
        .block-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .block-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: #f9f9f9;
            transition: box-shadow 0.2s;
        }
        
        .block-card:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .block-card h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .block-card p {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .block-card .tags {
            margin-top: 10px;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
            margin-bottom: 4px;
        }
        
        .badge-primary {
            background: #3498db;
            color: white;
        }
        
        .badge-success {
            background: #2ecc71;
            color: white;
        }
        
        .badge-warning {
            background: #f39c12;
            color: white;
        }
        
        .badge-info {
            background: #95a5a6;
            color: white;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        table th {
            background: #f4f4f4;
            font-weight: 600;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #95a5a6;
        }
        
        .empty-state h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .ports {
            margin-top: 10px;
            font-size: 12px;
        }
        
        .ports strong {
            color: #2c3e50;
        }
        
        .port-list {
            margin-left: 10px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h1>EchoZero Docs</h1>
            <input type="text" class="search-box" id="searchBox" placeholder="Search documentation...">
            
            <div class="nav-section">
                <h2>Getting Started</h2>
                <a href="#" class="nav-item active" data-page="overview">Overview</a>
                <a href="#" class="nav-item" data-page="quickstart">Quick Start</a>
                <a href="#" class="nav-item" data-page="architecture">Architecture</a>
            </div>
            
            <div class="nav-section">
                <h2>Blocks</h2>
                <a href="#" class="nav-item" data-page="blocks-all">All Blocks</a>
                <a href="#" class="nav-item" data-page="blocks-input">Input Blocks</a>
                <a href="#" class="nav-item" data-page="blocks-analysis">Analysis Blocks</a>
                <a href="#" class="nav-item" data-page="blocks-classification">Classification</a>
                <a href="#" class="nav-item" data-page="blocks-processing">Processing</a>
                <a href="#" class="nav-item" data-page="blocks-output">Output Blocks</a>
            </div>
            
            <div class="nav-section">
                <h2>Features</h2>
                <a href="#" class="nav-item" data-page="features">Feature Modules</a>
                <a href="#" class="nav-item" data-page="show-manager">Show Manager</a>
                <a href="#" class="nav-item" data-page="ma3">MA3 Integration</a>
            </div>
        </div>
        
        <div class="content" id="content">
            <div id="loading" class="empty-state">
                <h2>Loading Documentation...</h2>
            </div>
        </div>
    </div>
    
    <script>
        // Documentation data will be embedded here by generate_docs.py
        // Embedded documentation data (generated by scripts/generate_docs.py)
        const embeddedDocsData = {
        "blocks": [
                {
                        "name": "Load Audio",
                        "type_id": "LoadAudio",
                        "description": "Load audio file into the project",
                        "inputs": {},
                        "outputs": {
                                "audio": "Audio"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "audio",
                                "load",
                                "file",
                                "import"
                        ]
                },
                {
                        "name": "Setlist Audio Input",
                        "type_id": "SetlistAudioInput",
                        "description": "Audio input block for setlist processing. Automatically loads the current setlist song's audio file.",
                        "inputs": {},
                        "outputs": {
                                "audio": "Audio"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "audio",
                                "setlist",
                                "batch",
                                "input"
                        ]
                },
                {
                        "name": "Detect Onsets",
                        "type_id": "DetectOnsets",
                        "description": "Detect onset times in audio",
                        "inputs": {
                                "audio": "Audio"
                        },
                        "outputs": {
                                "events": "Event"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "onset",
                                "detection",
                                "analysis",
                                "audio"
                        ]
                },
                {
                        "name": "TensorFlow Classify",
                        "type_id": "TensorFlowClassify",
                        "description": "Classify events using TensorFlow/Keras models (.h5, .keras, SavedModel)",
                        "inputs": {
                                "events": "Event"
                        },
                        "outputs": {
                                "events": "Event"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "classification",
                                "tensorflow",
                                "keras",
                                "ai",
                                "ml",
                                "deep-learning"
                        ]
                },
                {
                        "name": "PyTorch Classify",
                        "type_id": "PyTorchClassify",
                        "description": "Classify events using PyTorch models (.pth, .pt, .onnx)",
                        "inputs": {
                                "events": "Event"
                        },
                        "outputs": {
                                "events": "Event"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "classification",
                                "pytorch",
                                "ai",
                                "ml",
                                "deep-learning",
                                "onnx"
                        ]
                },
                {
                        "name": "PyTorch Audio Trainer",
                        "type_id": "PyTorchAudioTrainer",
                        "description": "Advanced PyTorch audio classification trainer with multiple architectures, transfer learning, and hyperparameter optimization",
                        "inputs": {},
                        "outputs": {
                                "model": "Model"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "training",
                                "pytorch",
                                "ai",
                                "ml",
                                "deep-learning",
                                "audio",
                                "classification",
                                "cnn",
                                "rnn",
                                "transformer",
                                "transfer-learning"
                        ]
                },
                {
                        "name": "PyTorch Audio Classify",
                        "type_id": "PyTorchAudioClassify",
                        "description": "Classify events using PyTorch models created by PyTorch Audio Trainer. Automatically loads model architecture, classes, and preprocessing config.",
                        "inputs": {
                                "events": "Event",
                                "audio": "Audio"
                        },
                        "outputs": {
                                "events": "Event"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "classification",
                                "pytorch",
                                "ai",
                                "ml",
                                "deep-learning",
                                "audio",
                                "audio-trainer"
                        ]
                },
                {
                        "name": "Editor",
                        "type_id": "Editor",
                        "description": "Audio editor and visualization",
                        "inputs": {
                                "audio": "Audio",
                                "events": "Event"
                        },
                        "outputs": {
                                "audio": "Audio",
                                "events": "Event"
                        },
                        "execution_mode": "live",
                        "tags": [
                                "editor",
                                "visualization",
                                "audio",
                                "timeline"
                        ]
                },
                {
                        "name": "Export Audio",
                        "type_id": "ExportAudio",
                        "description": "Export processed audio items to disk in a chosen format (accepts multiple items on single port)",
                        "inputs": {
                                "audio": "Audio"
                        },
                        "outputs": {},
                        "execution_mode": "executable",
                        "tags": [
                                "export",
                                "audio",
                                "stems",
                                "file"
                        ]
                },
                {
                        "name": "Export Clips By Class",
                        "type_id": "ExportClipsByClass",
                        "description": "Export event audio clips organized by classification into subfolders",
                        "inputs": {
                                "audio": "Audio",
                                "events": "Event"
                        },
                        "outputs": {},
                        "execution_mode": "executable",
                        "tags": [
                                "export",
                                "clips",
                                "classification",
                                "organize",
                                "audio"
                        ]
                },
                {
                        "name": "Demucs Separator",
                        "type_id": "Separator",
                        "description": "Separate audio into stems using Demucs (outputs multiple stems on single port)",
                        "inputs": {
                                "audio": "Audio"
                        },
                        "outputs": {
                                "audio": "Audio"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "separator",
                                "demucs",
                                "stem",
                                "audio"
                        ]
                },
                {
                        "name": "Demucs Separator (Cloud)",
                        "type_id": "SeparatorCloud",
                        "description": "Separate audio into stems using Demucs on AWS Batch (configure credentials in block settings)",
                        "inputs": {
                                "audio": "Audio"
                        },
                        "outputs": {
                                "audio": "Audio"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "separator",
                                "demucs",
                                "stem",
                                "audio",
                                "cloud",
                                "aws"
                        ]
                },
                {
                        "name": "Demucs Separator (Cloud GCP)",
                        "type_id": "SeparatorCloudGCP",
                        "description": "Separate audio into stems using Demucs on Google Cloud Run (configure credentials in block settings)",
                        "inputs": {
                                "audio": "Audio"
                        },
                        "outputs": {
                                "audio": "Audio"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "separator",
                                "demucs",
                                "stem",
                                "audio",
                                "cloud",
                                "gcp",
                                "google"
                        ]
                },
                {
                        "name": "TranscribeNote",
                        "type_id": "TranscribeNote",
                        "description": "Extract notes from audio using Spotify's Basic-Pitch AI model (best for bass/single instruments)",
                        "inputs": {
                                "audio": "Audio"
                        },
                        "outputs": {
                                "events": "Event"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "note",
                                "transcription",
                                "pitch",
                                "bass",
                                "basicpitch",
                                "ai"
                        ]
                },
                {
                        "name": "TranscribeLib",
                        "type_id": "TranscribeLib",
                        "description": "Extract notes from audio using Librosa onset detection + pitch tracking (more configurable)",
                        "inputs": {
                                "audio": "Audio"
                        },
                        "outputs": {
                                "events": "Event"
                        },
                        "execution_mode": "executable",
                        "tags": [
                                "note",
                                "transcription",
                                "pitch",
                                "bass",
                                "librosa",
                                "onset"
                        ]
                },
                {
                        "name": "Show Manager",
                        "type_id": "ShowManager",
                        "description": "Orchestrates bidirectional communication between EchoZero and grandMA3",
                        "inputs": {},
                        "outputs": {},
                        "execution_mode": "live",
                        "tags": [
                                "ma3",
                                "grandma",
                                "lighting",
                                "sync",
                                "osc",
                                "orchestrator"
                        ]
                }
        ],
        "features": [
                {
                        "name": "blocks",
                        "path": "src/features/blocks",
                        "readme": "# Blocks Feature Module\n\nThe blocks feature manages block entities, their state, and expected outputs.\n\n## Overview\n\nBlocks are the core processing units in EchoZero. Each block:\n- Has a type that determines its behavior\n- Manages input/output ports for data flow\n- Tracks processing status\n- Stores configuration and results\n\n## Architecture\n\n```\nblocks/\n\u251c\u2500\u2500 application/          # Services and API\n\u2502   \u251c\u2500\u2500 block_service.py       # Block CRUD operations\n\u2502   \u251c\u2500\u2500 block_state_helper.py  # State management\n\u2502   \u251c\u2500\u2500 block_status_service.py # Status tracking\n\u2502   \u251c\u2500\u2500 editor_api.py          # Editor integration\n\u2502   \u2514\u2500\u2500 expected_outputs_service.py\n\u251c\u2500\u2500 domain/               # Entities and interfaces\n\u2502   \u251c\u2500\u2500 block.py              # Block entity\n\u2502   \u251c\u2500\u2500 block_repository.py   # Repository interface\n\u2502   \u251c\u2500\u2500 block_status.py       # Status enum\n\u2502   \u2514\u2500\u2500 port.py               # Port definitions\n\u2514\u2500\u2500 infrastructure/       # Implementations\n    \u2514\u2500\u2500 block_repository_impl.py\n```\n\n## Key Components\n\n- **BlockService** - CRUD operations for blocks\n- **BlockStatusService** - Manages block processing status\n- **BlockStateHelper** - Handles block state transitions\n- **ExpectedOutputsService** - Manages expected output tracking\n\n## Usage\n\n```python\nfrom src.application.api.application_facade import get_facade\n\nfacade = get_facade()\n\n# Create a block\nblock = facade.create_block(\"LoadAudio\")\n\n# Get block status\nstatus = facade.get_block_status(block.id)\n```\n\n## Related\n\n- [Block Processors](../../application/blocks/README.md) - Processing implementations\n- [Connections](../connections/README.md) - Block connections\n- [Execution](../execution/README.md) - Block execution\n"
                },
                {
                        "name": "show_manager",
                        "path": "src/features/show_manager",
                        "readme": "# Show Manager Feature Module\n\nManages show-based workflows with bidirectional sync to GrandMA3 lighting consoles.\n\n## Overview\n\nShow Manager provides show-oriented workflows, organizing content into layers and maintaining bidirectional synchronization with GrandMA3 lighting consoles via OSC.\n\n## Architecture\n\n```\nshow_manager/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 sync_system_manager.py      # Main sync orchestration\n\u2502   \u251c\u2500\u2500 sync_layer_manager.py       # Layer sync management\n\u2502   \u251c\u2500\u2500 sync_safety.py              # Conflict resolution & safety\n\u2502   \u251c\u2500\u2500 sync_subscription_service.py # Change subscriptions\n\u2502   \u251c\u2500\u2500 show_manager_listener_service.py  # OSC listener\n\u2502   \u251c\u2500\u2500 show_manager_state_service.py     # Connection state\n\u2502   \u251c\u2500\u2500 ma3_event_handler.py        # MA3 event processing\n\u2502   \u251c\u2500\u2500 ma3_track_resolver.py       # Track name resolution\n\u2502   \u2514\u2500\u2500 commands/                   # Sync commands\n\u2502       \u251c\u2500\u2500 sync_layer_command.py\n\u2502       \u251c\u2500\u2500 batch_sync_command.py\n\u2502       \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 domain/\n    \u251c\u2500\u2500 sync_layer_entity.py       # Unified sync entity\n    \u251c\u2500\u2500 sync_state.py               # Sync state tracking\n    \u2514\u2500\u2500 layer_sync_types.py         # Type definitions\n```\n\n## Key Components\n\n- **SyncSystemManager** - Single orchestration point for all sync operations\n- **SyncLayerEntity** - Unified entity representing synced layers (MA3 or Editor)\n- **ShowManagerListenerService** - Manages OSC listener for MA3 communication\n- **ShowManagerStateService** - Tracks connection state and status polling\n- **SyncSafety** - Conflict resolution, validation, and backup management\n\n## Features\n\n- **Bidirectional Sync** - Sync Editor layers \u2194 MA3 tracks\n- **Real-time Updates** - OSC-based event synchronization\n- **Conflict Resolution** - Automatic conflict detection and resolution\n- **Safety Checks** - Validation and backup before destructive operations\n- **Layer Mapping** - Flexible mapping between EchoZero layers and MA3 tracks\n\n## Usage\n\n```python\nfrom src.features.show_manager.application import SyncSystemManager\n\n# Add a synced layer\nsync_manager.add_synced_ma3_track(\n    block_id=\"show_manager_1\",\n    ma3_coord=\"tc1_tg1_tr1\",\n    editor_layer_id=\"layer_1\"\n)\n\n# Sync changes\nsync_manager.sync_layer(\"layer_1\")\n```\n\n## Related\n\n- [MA3 Integration](../ma3/README.md) - GrandMA3 integration details\n- [Blocks](../blocks/README.md) - Block system\n- [Connections](../connections/README.md) - Block connections\n"
                },
                {
                        "name": "projects",
                        "path": "src/features/projects",
                        "readme": "# Projects Feature Module\n\nManages project persistence, loading, and state.\n\n## Overview\n\nProjects are the top-level container for blocks, connections, and data.\nThis module handles saving, loading, and project lifecycle.\n\n## Architecture\n\n```\nprojects/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 project_service.py     # Project operations\n\u2502   \u2514\u2500\u2500 recent_projects.py     # Recent projects tracking\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 project.py             # Project entity\n\u2502   \u251c\u2500\u2500 project_repository.py  # Repository interface\n\u2502   \u2514\u2500\u2500 project_events.py      # Project-related events\n\u2514\u2500\u2500 infrastructure/\n    \u251c\u2500\u2500 project_repository_impl.py\n    \u2514\u2500\u2500 project_file_handler.py  # .ez file handling\n```\n\n## Key Components\n\n- **ProjectService** - Create, save, load projects\n- **Project** - Entity containing blocks and connections\n- **ProjectFileHandler** - Serialization to .ez format\n\n## Usage\n\n```python\nfrom src.application.api.application_facade import get_facade\n\nfacade = get_facade()\n\n# Save project\nfacade.save_project(\"/path/to/project.ez\")\n\n# Load project\nfacade.load_project(\"/path/to/project.ez\")\n\n# New project\nfacade.new_project()\n```\n\n## Related\n\n- [Blocks](../blocks/README.md) - Blocks within projects\n- [Connections](../connections/README.md) - Connections within projects\n"
                },
                {
                        "name": "ma3",
                        "path": "src/features/ma3",
                        "readme": "# MA3 Feature Module\n\nGrandMA3 lighting console integration.\n\n## Overview\n\nThis module provides integration with GrandMA3 lighting consoles,\nenabling synchronized playback and control.\n\n## Architecture\n\n```\nma3/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 ma3_service.py         # Main MA3 service\n\u2502   \u251c\u2500\u2500 ma3_commands.py        # Command operations\n\u2502   \u2514\u2500\u2500 ma3_connection.py      # Connection management\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 ma3_connection.py      # Connection entity\n\u2502   \u2514\u2500\u2500 ma3_events.py          # MA3 events\n\u2514\u2500\u2500 infrastructure/\n    \u2514\u2500\u2500 ma3_client.py          # OSC/Network client\n```\n\n## Key Components\n\n- **MA3Service** - High-level MA3 operations\n- **MA3Connection** - Connection state management\n- **MA3Client** - Network communication\n\n## Configuration\n\nSee [docs/MA3_INTEGRATION.md](../../../docs/MA3_INTEGRATION.md) for setup.\n\n## Related\n\n- [Show Manager](../show_manager/README.md) - Show-based workflows\n- [MA3 Plugins](../../../ma3_plugins/) - GrandMA3 Lua plugins\n"
                },
                {
                        "name": "connections",
                        "path": "src/features/connections",
                        "readme": "# Connections Feature Module\n\nManages connections between blocks for data flow.\n\n## Overview\n\nConnections link output ports of one block to input ports of another,\nenabling data to flow through the processing graph.\n\n## Architecture\n\n```\nconnections/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 connection_commands.py  # Command pattern operations\n\u2502   \u2514\u2500\u2500 connection_service.py   # Connection management\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 connection.py           # Connection entity\n\u2502   \u251c\u2500\u2500 connection_repository.py # Repository interface\n\u2502   \u2514\u2500\u2500 connection_summary.py   # Summary data class\n\u2514\u2500\u2500 infrastructure/\n    \u2514\u2500\u2500 connection_repository_impl.py\n```\n\n## Key Components\n\n- **ConnectionService** - Create, delete, query connections\n- **Connection** - Entity representing a link between ports\n\n## Usage\n\n```python\nfrom src.application.api.application_facade import get_facade\n\nfacade = get_facade()\n\n# Connect two blocks\nfacade.connect_blocks(source_block_id, target_block_id, \n                      source_port, target_port)\n\n# Get connections for a block\nconnections = facade.get_block_connections(block_id)\n```\n\n## Related\n\n- [Blocks](../blocks/README.md) - Block entities\n- [Execution](../execution/README.md) - How connections affect execution order\n"
                },
                {
                        "name": "execution",
                        "path": "src/features/execution",
                        "readme": "# Execution Feature Module\n\nHandles graph execution, progress tracking, and topological sorting.\n\n## Overview\n\nThe execution engine processes the block graph in topological order,\ntracking progress and handling errors.\n\n## Architecture\n\n```\nexecution/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 execution_engine.py    # Main execution coordinator\n\u2502   \u251c\u2500\u2500 progress_tracker.py    # Progress reporting\n\u2502   \u2514\u2500\u2500 topological_sort.py    # Dependency ordering\n\u251c\u2500\u2500 domain/\n\u2502   \u2514\u2500\u2500 (execution domain objects)\n\u2514\u2500\u2500 infrastructure/\n    \u2514\u2500\u2500 (execution infrastructure)\n```\n\n## Key Components\n\n- **ExecutionEngine** - Coordinates block execution\n- **ProgressTracker** - Reports execution progress\n- **TopologicalSort** - Orders blocks by dependencies\n\n## Execution Flow\n\n1. Build dependency graph from connections\n2. Topologically sort blocks\n3. Execute blocks in order\n4. Track progress and status\n5. Handle errors and rollback\n\n## Related\n\n- [Blocks](../blocks/README.md) - Block entities\n- [Connections](../connections/README.md) - Dependency graph\n- [Block Processors](../../application/blocks/README.md) - Processing logic\n"
                },
                {
                        "name": "setlists",
                        "path": "src/features/setlists",
                        "readme": "# Setlists Feature Module\n\nManages setlists for batch audio processing workflows.\n\n## Overview\n\nSetlists enable batch processing of multiple audio files through\nthe same block graph, tracking state for each item.\n\n## Architecture\n\n```\nsetlists/\n\u251c\u2500\u2500 application/\n\u2502   \u251c\u2500\u2500 setlist_service.py     # Setlist operations\n\u2502   \u2514\u2500\u2500 setlist_commands.py    # Command pattern operations\n\u251c\u2500\u2500 domain/\n\u2502   \u251c\u2500\u2500 setlist.py             # Setlist entity\n\u2502   \u251c\u2500\u2500 setlist_item.py        # Individual items\n\u2502   \u2514\u2500\u2500 setlist_repository.py  # Repository interface\n\u2514\u2500\u2500 infrastructure/\n    \u2514\u2500\u2500 setlist_repository_impl.py\n```\n\n## Key Components\n\n- **SetlistService** - CRUD and processing operations\n- **Setlist** - Container for items to process\n- **SetlistItem** - Individual audio file entry\n\n## Related\n\n- [Show Manager](../show_manager/README.md) - Show-based workflows\n- [Execution](../execution/README.md) - Processing engine\n"
                }
        ],
        "version": "2.1",
        "last_updated": "2026-02-04"
};
        let docsData = null;
        
        // Load documentation data
        async function loadDocs() {
            // First try embedded data (if available)
            if (typeof embeddedDocsData !== 'undefined') {
                docsData = embeddedDocsData;
                renderPage('overview');
                return;
            }
            
            // Fallback: try to fetch from JSON file (requires server)
            try {
                const response = await fetch('docs.json');
                if (!response.ok) throw new Error('Could not load docs.json');
                docsData = await response.json();
                renderPage('overview');
            } catch (error) {
                // Show helpful error message
                document.getElementById('content').innerHTML = `
                    <div class="empty-state">
                        <h2>Documentation Data Not Found</h2>
                        <p>To generate the documentation data, run:</p>
                        <pre style="text-align: left; max-width: 600px; margin: 20px auto; padding: 15px; background: #f4f4f4; border-radius: 4px;"><code>python3 scripts/generate_docs.py</code></pre>
                        <p>This will embed the documentation data directly into this HTML file, allowing it to work when opened directly in a browser.</p>
                        <p style="margin-top: 20px; color: #95a5a6;">Error: ${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', (e) => {
                e.preventDefault();
                const page = item.getAttribute('data-page');
                renderPage(page);
                
                // Update active state
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                item.classList.add('active');
            });
        });
        
        function renderPage(pageId) {
            if (!docsData) {
                loadDocs();
                return;
            }
            
            const content = document.getElementById('content');
            
            switch(pageId) {
                case 'overview':
                    content.innerHTML = renderOverview();
                    break;
                case 'quickstart':
                    content.innerHTML = renderQuickStart();
                    break;
                case 'architecture':
                    content.innerHTML = renderArchitecture();
                    break;
                case 'blocks-all':
                    content.innerHTML = renderAllBlocks();
                    break;
                case 'blocks-input':
                    content.innerHTML = renderBlocksByCategory('input');
                    break;
                case 'blocks-analysis':
                    content.innerHTML = renderBlocksByCategory('analysis');
                    break;
                case 'blocks-classification':
                    content.innerHTML = renderBlocksByCategory('classification');
                    break;
                case 'blocks-processing':
                    content.innerHTML = renderBlocksByCategory('processing');
                    break;
                case 'blocks-output':
                    content.innerHTML = renderBlocksByCategory('output');
                    break;
                case 'features':
                    content.innerHTML = renderFeatures();
                    break;
                case 'show-manager':
                    content.innerHTML = renderShowManager();
                    break;
                case 'ma3':
                    content.innerHTML = renderMA3();
                    break;
                default:
                    content.innerHTML = `<div class="empty-state"><h2>Page not found</h2></div>`;
            }
        }
        
        function renderOverview() {
            return `
                <h1>EchoZero Documentation</h1>
                <p>Welcome to the EchoZero documentation. This guide will help you understand how the application works.</p>
                
                <h2>What is EchoZero?</h2>
                <p>EchoZero is a modular audio processing engine with a node-based architecture. Build audio processing pipelines by connecting blocks (processing nodes) in a visual graph.</p>
                
                <h2>Key Features</h2>
                <ul>
                    <li><strong>Node-based workflow:</strong> Visual block graph for audio processing pipelines</li>
                    <li><strong>Extensible block system:</strong> Easy to add new processing blocks</li>
                    <li><strong>Multiple interfaces:</strong> CLI for scripting, Qt GUI for visual editing</li>
                    <li><strong>Audio source separation:</strong> Demucs integration for stem separation</li>
                    <li><strong>Note transcription:</strong> Basic-pitch and librosa-based note extraction</li>
                    <li><strong>Event visualization:</strong> Plot and inspect audio events</li>
                    <li><strong>Project files:</strong> Save and share workflows as .ez files</li>
                    <li><strong>MA3 Integration:</strong> GrandMA3 lighting console integration</li>
                </ul>
                
                <h2>Quick Stats</h2>
                <p><strong>${docsData.blocks.length} Block Types</strong> available for building processing pipelines</p>
                <p><strong>${docsData.features.length} Feature Modules</strong> organized by domain</p>
                
                <h2>Getting Started</h2>
                <p>Start with the <strong>Quick Start</strong> guide in the sidebar to get up and running quickly, or explore the <strong>Blocks</strong> section to understand available processing capabilities.</p>
            `;
        }
        
        function renderQuickStart() {
            return `
                <h1>Quick Start Guide</h1>
                
                <h2>Installation</h2>
                <pre><code># Clone the repository
git clone https://github.com/yourusername/EchoZero.git
cd EchoZero

# Install dependencies
pip install -r requirements.txt

# Install in development mode
pip install -e .</code></pre>
                
                <h2>Launch GUI</h2>
                <pre><code>python3 main_qt.py</code></pre>
                
                <h2>Basic Workflow</h2>
                <ol>
                    <li>Launch EchoZero GUI</li>
                    <li>Create a new project (Ctrl+N)</li>
                    <li>Add blocks from the toolbar</li>
                    <li>Connect blocks by dragging from ports</li>
                    <li>Configure blocks via double-click</li>
                    <li>Execute with F5 or the Execute button</li>
                    <li>Save your project (Ctrl+S)</li>
                </ol>
                
                <h2>Example: Detect Onsets</h2>
                <ol>
                    <li>Add a <strong>LoadAudio</strong> block</li>
                    <li>Add a <strong>DetectOnsets</strong> block</li>
                    <li>Connect LoadAudio's "audio" output to DetectOnsets' "audio" input</li>
                    <li>Configure LoadAudio with an audio file path</li>
                    <li>Execute (F5)</li>
                    <li>View results in the DetectOnsets block panel</li>
                </ol>
            `;
        }
        
        function renderArchitecture() {
            return `
                <h1>Architecture Overview</h1>
                
                <p>EchoZero uses a <strong>vertical feature module</strong> architecture with clear separation of concerns. Code is organized by feature rather than by technical layer.</p>
                
                <h2>Directory Structure</h2>
                <pre><code>src/
    features/           # Feature modules (vertical slices)
        blocks/         # Block processing
        connections/    # Block connections
        execution/      # Execution engine
        ma3/           # grandMA3 integration
        projects/       # Project management
        setlists/       # Setlist management
        show_manager/   # Show-based workflows
    
    application/       # Application services
        blocks/         # Block processors (execution logic)
        commands/       # Command pattern (undo/redo)
        settings/       # Settings system
        api/            # ApplicationFacade
    
    shared/            # Cross-cutting concerns
        application/    # Events, registry, validation
        domain/         # Shared entities
        infrastructure/ # Base repositories</code></pre>
                
                <h2>Feature Module Structure</h2>
                <p>Each feature module follows a consistent three-layer pattern:</p>
                <pre><code>feature_name/
    __init__.py          # Public API, re-exports
    domain/              # Entities, value objects, repository interfaces
    application/         # Services, commands, processors
    infrastructure/      # Repository implementations</code></pre>
                
                <h2>Design Principles</h2>
                <ul>
                    <li><strong>"The best part is no part"</strong> - Question every addition, prefer removal</li>
                    <li><strong>Explicit over implicit</strong> - Clear, obvious code</li>
                    <li><strong>Data over code</strong> - Prefer declarative approaches</li>
                    <li><strong>Feature-first</strong> - Organize by feature, not by technical layer</li>
                </ul>
            `;
        }
        
        function renderAllBlocks() {
            const blocks = docsData.blocks;
            const cards = blocks.map(block => renderBlockCard(block)).join('');
            return `
                <h1>All Blocks</h1>
                <p>Complete reference for all ${blocks.length} available block types in EchoZero.</p>
                <div class="block-grid">${cards}</div>
            `;
        }
        
        function renderBlocksByCategory(category) {
            const categoryMap = {
                'input': ['LoadAudio', 'SetlistAudioInput'],
                'analysis': ['DetectOnsets', 'TranscribeNote', 'TranscribeLib'],
                'classification': ['TensorFlowClassify', 'PyTorchClassify', 'PyTorchAudioClassify', 'PyTorchAudioTrainer'],
                'processing': ['Separator', 'SeparatorCloud', 'SeparatorCloudGCP', 'Editor'],
                'output': ['ExportAudio', 'ExportClipsByClass', 'ShowManager']
            };
            
            const blockIds = categoryMap[category] || [];
            const blocks = docsData.blocks.filter(b => blockIds.includes(b.type_id));
            const cards = blocks.map(block => renderBlockCard(block)).join('');
            
            return `
                <h1>${category.charAt(0).toUpperCase() + category.slice(1)} Blocks</h1>
                <div class="block-grid">${cards}</div>
            `;
        }
        
        function renderBlockCard(block) {
            const inputs = Object.keys(block.inputs || {}).join(', ') || 'None';
            const outputs = Object.keys(block.outputs || {}).join(', ') || 'None';
            const tags = (block.tags || []).map(tag => `<span class="badge badge-info">${tag}</span>`).join('');
            
            return `
                <div class="block-card">
                    <h4>${block.name}</h4>
                    <p>${block.description}</p>
                    <div class="ports">
                        <strong>Inputs:</strong> <span class="port-list">${inputs}</span><br>
                        <strong>Outputs:</strong> <span class="port-list">${outputs}</span><br>
                        <strong>Mode:</strong> <span class="badge badge-primary">${block.execution_mode}</span>
                    </div>
                    <div class="tags">${tags}</div>
                </div>
            `;
        }
        
        function renderFeatures() {
            const features = docsData.features.map(f => `
                <div class="block-card">
                    <h4>${f.name}</h4>
                    <p>${f.readme.split('\n').slice(0, 5).join('\n')}</p>
                    <p><strong>Path:</strong> <code>${f.path}</code></p>
                </div>
            `).join('');
            
            return `
                <h1>Feature Modules</h1>
                <p>EchoZero is organized into ${docsData.features.length} feature modules, each handling a specific domain.</p>
                <div class="block-grid">${features}</div>
            `;
        }
        
        function renderShowManager() {
            return `
                <h1>Show Manager</h1>
                <p>The Show Manager feature provides show-oriented workflows with cues, layers, and GrandMA3 integration.</p>
                
                <h2>Overview</h2>
                <p>Show Manager organizes content into cues and layers for live performance, with bidirectional sync to GrandMA3 lighting consoles.</p>
                
                <h2>Key Components</h2>
                <ul>
                    <li><strong>SyncSystemManager</strong> - Orchestrates all sync operations</li>
                    <li><strong>SyncLayerEntity</strong> - Unified entity for synced layers</li>
                    <li><strong>ShowManagerListenerService</strong> - OSC listener for MA3 communication</li>
                    <li><strong>ShowManagerStateService</strong> - Connection state management</li>
                </ul>
                
                <h2>Features</h2>
                <ul>
                    <li>Bidirectional sync between EchoZero Editor layers and MA3 tracks</li>
                    <li>Real-time event synchronization</li>
                    <li>Conflict resolution and safety checks</li>
                    <li>Layer mapping and reconciliation</li>
                </ul>
            `;
        }
        
        function renderMA3() {
            return `
                <h1>GrandMA3 Integration</h1>
                <p>EchoZero integrates with GrandMA3 lighting consoles via OSC (Open Sound Control) and Lua plugins.</p>
                
                <h2>Architecture</h2>
                <p>The MA3 integration consists of:</p>
                <ul>
                    <li><strong>MA3 Communication Service</strong> - OSC message handling</li>
                    <li><strong>MA3 Lua Plugin</strong> - Runs on MA3 console (echozero_spine)</li>
                    <li><strong>Show Manager</strong> - Sync orchestration</li>
                </ul>
                
                <h2>Communication Flow</h2>
                <ol>
                    <li>EchoZero listens for OSC messages on port 9000</li>
                    <li>MA3 plugin sends structure and event data via OSC</li>
                    <li>EchoZero processes messages and updates Editor layers</li>
                    <li>Bidirectional sync maintains consistency</li>
                </ol>
                
                <h2>MA3 Plugin Functions</h2>
                <p>The echozero_spine plugin provides Lua functions for:</p>
                <ul>
                    <li>Connection testing (EZ.Ping)</li>
                    <li>Querying structure (EZ.GetTimecodes, EZ.GetTracks)</li>
                    <li>Event manipulation (EZ.AddEvent, EZ.DeleteEvent)</li>
                    <li>Real-time hooks (EZ.HookTrack, EZ.UnhookTrack)</li>
                </ul>
            `;
        }
        
        // Search functionality
        document.getElementById('searchBox').addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase();
            if (query.length < 2) return;
            
            // Simple search - highlight matching nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                const text = item.textContent.toLowerCase();
                if (text.includes(query)) {
                    item.style.backgroundColor = '#34495e';
                } else {
                    item.style.backgroundColor = '';
                }
            });
        });
        
        // Load docs on page load
        loadDocs();
    </script>
</body>
</html>
